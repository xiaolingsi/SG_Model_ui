<!DOCTYPE html>
<html lang="en" style="height: 100%; width: 100%">
<head>
    <meta charset="UTF-8">
    <title>Welcome!</title>
</head>
<body style="height: 90%; width: 100% ;display: flex" >
    <div style="height: 100%; width: 40%;white-space: nowrap;margin-left: 5px">
        <div id="container" style="height: 50%; width: 100%"></div>
        <div id="out_predict_container" style="height: 50%; width: 100%"></div>
    </div>
    <div style="height: 100%; width: 40%;white-space: nowrap;margin-left: 15%">
        <div id="insideTemp_container" style="height: 100%; width: 100%"></div>
        <div id="insideTemp_predict" style="height: 100%; width: 100%"></div>
    </div>


  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/extension/bmap.min.js"></script>
  -->
{#<script type="text/javascript" src="../static/api.js"></script>#}
  <script type="text/javascript">
    $.ajax({
        type:'GET',
        url:"http://127.0.0.1:5000/home/temperature",
        dataType:'json',
        async:false,
        success:function(data){
            temperature_data = data.valueOf('responseJSON').valueOf('temperature')
              //html原本的js代码
        }
    });
    var temperature_dom = document.getElementById('container');
    var myChart_temperature = echarts.init(temperature_dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    {#var app = {};#}

    var temperature_option;

    temperature_option = {
        title: [{
      left: 'center',
      text: 'Outside temperature'
    }]
        ,
  xAxis: {
    type: 'category',
    data: temperature_data["time"].map(function (item) {
  return item.substr(9,8);
})
  },
  yAxis: {
    type: 'value',
      min: 10,
      max: 40
  },
  series: [
    {
      data: temperature_data["temperature"],
      type: 'line',
      smooth: true
    }
  ]
};

    if (temperature_option && typeof temperature_option === 'object') {
      myChart_temperature.setOption(temperature_option);
    }
    window.addEventListener('resize', myChart_temperature.resize);


  {#  以下为室内温度展示#}
    $.ajax({
        type:'GET',
        url:"http://127.0.0.1:5000/home/inside_temp",
        dataType:'json',
        async:false,
        success:function(data){
            temperature_data = data.valueOf('responseJSON').valueOf('temperature')
              //html原本的js代码
        }
    });
    var inside_temp_dom = document.getElementById('insideTemp_container');
    var myChart_inside_temp = echarts.init(inside_temp_dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    {#var app = {};#}

    var inside_temp_option;

    // prettier-ignore
const inside_temp_data = [["2000-06-05", 116], ["2000-06-06", 129], ["2000-06-07", 135], ["2000-06-08", 86], ["2000-06-09", 73], ["2000-06-10", 85], ["2000-06-11", 73], ["2000-06-12", 68], ["2000-06-13", 92], ["2000-06-14", 130], ["2000-06-15", 245], ["2000-06-16", 139], ["2000-06-17", 115], ["2000-06-18", 111], ["2000-06-19", 309], ["2000-06-20", 206], ["2000-06-21", 137], ["2000-06-22", 128], ["2000-06-23", 85], ["2000-06-24", 94], ["2000-06-25", 71], ["2000-06-26", 106], ["2000-06-27", 84], ["2000-06-28", 93], ["2000-06-29", 85], ["2000-06-30", 73], ["2000-07-01", 83], ["2000-07-02", 125], ["2000-07-03", 107], ["2000-07-04", 82], ["2000-07-05", 44], ["2000-07-06", 72], ["2000-07-07", 106], ["2000-07-08", 107], ["2000-07-09", 66], ["2000-07-10", 91], ["2000-07-11", 92], ["2000-07-12", 113], ["2000-07-13", 107], ["2000-07-14", 131], ["2000-07-15", 111], ["2000-07-16", 64], ["2000-07-17", 69], ["2000-07-18", 88], ["2000-07-19", 77], ["2000-07-20", 83], ["2000-07-21", 111], ["2000-07-22", 57], ["2000-07-23", 55], ["2000-07-24", 60]];
{#const inside_temp_dateList = temperature_data["time"].map#}
const inside_temp_dateList = temperature_data["time"].map(function (item) {
  return item.substr(17,8);
});
const inside_temp_valueList = temperature_data["temperature"]
inside_temp_option = {
  // Make gradient line here
  visualMap: [
    {
      show: false,
      type: 'continuous',
      seriesIndex: 0,
    }
    {#,
    {
      show: false,
      type: 'continuous',
      seriesIndex: 1,
      dimension: 0,
      min: 0,
      max: inside_temp_dateList.length - 1
    }#}
  ],
  title: [
    {
      left: 'center',
      text: 'Inside Temperature'
    }
    {#,
    {
      top: '55%',
      left: 'center',
      text: 'Gradient along the x axis'
    }#}
  ],
  tooltip: {
    trigger: 'axis'
  },
  xAxis: [
    {
      data: inside_temp_dateList
    }
    {#,
    {
      data: inside_temp_dateList,
      gridIndex: 1
    }#}
  ],
  yAxis: [
    {},
    {#{
      gridIndex: 1
    }#}
  ],
  grid: [
    {
      bottom: '60%'
    },
    {
      top: '60%'
    }
  ],
  series: [
    {
      type: 'line',
      showSymbol: false,
      data: inside_temp_valueList
    },
    {#{
      type: 'line',
      showSymbol: false,
      data: inside_temp_valueList,
      xAxisIndex: 1,
      yAxisIndex: 1
    }#}
  ]
};

    if (inside_temp_option && typeof inside_temp_option === 'object') {
      myChart_inside_temp.setOption(inside_temp_option);
    }

    window.addEventListener('resize', myChart_inside_temp.resize);
  </script>
</body>
</html>